<?php

/****************************************************************************************
 **** ぴぞどげ旦尊ぴぞなき村旦卒ぴぞなぜ尊属揃ぴぞなぇ PGID存側 卒ぴぞなじ存贈属ぴぞなく ぴぞどぜ促遜ぴぞどざぴぞどぜぴぞなが卒ぴぞなじ (2003.12.19 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) ****
 ****************************************************************************************
 *** ぴぞどぜぴぞなお卒ぴぞなぜぴぞどぜ PGID 尊ぴぞなぇ尊ぴぞなか尊 ぴぞどげ旦尊ぴぞなき村旦卒ぴぞなぜ尊属揃ぴぞなぇ TID存側 尊属袖袖揃ぴぞなぇ ぴぞどぜ促遜ぴぞどざぴぞどぜぴぞなお袖袖揃ぴぞなお ぴぞどぜぴぞなお存巽,  ***
 *** ぴぞなぎぴぞどぜ揃ぴぞなぇ 村旦ぴぞどげ造ぴぞどぜぴぞなお卒ぴぞどご 属脱多狸 ぴぞどげ旦尊ぴぞなき 遜ぴぞどぜぴぞどせぴぞなか属臓 孫ぴぞにぁ損箪 袖ぴぞどぞ村旦 ぴぞなけ存孫ぴぞどぜ揃ぴぞなぇ 箪卒谷揃ぴぞなぇ 村旦ぴぞどげ造  ***
 *** ぴぞどぜぴぞなおぴぞどげ旦 他ぴぞなあ袖袖揃ぴぞなお ぴぞどぜぴぞなお遜ぴぞどざ賊但 孫ぴぞなじ其淡卒ぴぞなお卒ぴぞなじ.     ********************************************* 
 *** ぴぞなぎぴぞどぜ揃ぴぞなぇ 村旦ぴぞどげ造ぴぞどぜぴぞなお多息 孫ぴぞにぁ損箪袖ぴぞどそ 孫速ぴぞどげ側多臓 卒谷ぴぞどぜぴぞなざ村足卒ぴぞどご (ぴぞどげぴぞなけ)ぴぞなぅ卒ぴぞなお遜ぴぞどざ遜尊多臓 ぴぞどざ促ぴぞなぎぴぞなぅ    ***** 
 *** 他淡存卒ぴぞなお ぴぞどげぴぞなけぴぞどぜ ぴぞどぜぴぞなお遜ぴぞどざ賊但 孫ぴぞなじ其淡卒ぴぞなお卒ぴぞなじ.      ********************************************
 ***************************************************************************************/
extract($_POST);
extract($_GET);
/*************************************************************************************
 *************************************************************************************
   ********************        損坦賊但尊ぴぞなぇ尊ぴぞなか 箪卒谷 村旦ぴぞどげ造 尊ぴぞなき属臓      ************************
 *************************************************************************************
 *************************************************************************************/
 
/*----------------------------------------------------------* 
 *孫束ぴぞなぅぴぞなず ぴぞどぜぴぞなき尊ぴぞなぇ属ぴぞどず揃臓ぴぞなぇ 属脱多狸 ぴぞどぜぴぞなき尊ぴぞなぇ属続多湛村旦 袖ぴぞなず多臓 孫束ぴぞなぅぴぞなずぴぞどぜぴぞなき尊ぴぞなぇぴぞなぎ損 ぴぞどぜ促遜ぴぞどざ*
 *----------------------------------------------------------*/

if( isset( $quotainterest) && !is_null( $quotainterest) && $quotainterest == "1")
{
	$interest = "(孫束ぴぞなぅぴぞなずぴぞどぜぴぞなき尊ぴぞなぇ)";
}
 
/*----------------------------------------------------------*/


class INIpay41
{
	var $fd;
	var $m_inipayHome; 		//ぴぞなぅ卒ぴぞなおぴぞどせ辰ぴぞなぅ ぴぞどそ即袖丹揃尊ぴぞどずぴぞなう存速
	var $m_test; 			// "true"存辿 17孫淡存揃ぴぞなぇ 尊存続遜卒ぴぞなじ
	var $m_debug; 			// "true"存辿 損坦村村ぴぞどぜぴぞなが 揃ぴぞなぇ賊ぴぞなご存側 続族賊辰卒ぴぞなじ
	var $m_type; 			// 属ぴぞどず揃臓 俗ぴぞどぜ端
	var $m_pgId; 			// PGID
	var $m_keyPw; 			// keypass.encぴぞどぜ pass phrase
	var $m_subPgIp; 		// 3孫淡ぴぞどご属 多孫尊単 PG IP Addr
	var $m_mid; 			// 損坦ぴぞどげ臓 他ぴぞどせぴぞなぅ袖丹
	var $m_language; 		// 損巽多谷他丹他樽
	var $m_oldTid; 			// 尊ぴぞなぇ尊ぴぞなかぴぞどざ谷村ぴぞなき(巽遜ぴぞどごぴぞなぇ) 損巽多谷遜ぴぞどざ 多淡属ぴぞどず揃臓他ぴぞどせぴぞなぅ袖丹
	var $m_tid; 			// 属ぴぞどず揃臓他ぴぞどせぴぞなぅ袖丹
	var $m_goodName; 		// 損坦ぴぞどぜ属存鱈
	var $m_currency; 		// ぴぞどそ足ぴぞどせ坦卒ぴぞなぜ則 (WON, USD)
	var $m_price; 			// 賊ぴぞなそ他ぴぞなご
	var $m_confirm_price;		// 巽遜ぴぞどごぴぞなぇ 多辰ぴぞどざ損 賊ぴぞなそ他ぴぞなご
	var $m_buyerName; 		// 賊存存ぴぞどずぴぞなず 村尊存鱈
	var $m_buyerTel; 		// 賊存存ぴぞどずぴぞなず 端ぴぞどそ足孫淡ぴぞどそ贈 (SMS 其束多臓 孫ぴぞなそ袖奪遜ぴぞどざ ぴぞなぅ袖多端ぴぞどそ足...)
	var $m_buyerEmail; 		// 賊存存ぴぞどずぴぞなず ぴぞなぅ存ぴぞなぞぴぞなお
	var $m_recvName; 		// 村旦ぴぞどざ谷ぴぞなぇ 村尊存鱈
	var $m_recvTel; 		// 村旦ぴぞどざ谷ぴぞなぇ 多測其担ぴぞどざ続
	var $m_recvAddr; 		// 村旦ぴぞどざ谷ぴぞなぇ ぴぞどげぴぞなけ村ぴぞなき
	var $m_recvPostNum; 		// 村旦ぴぞどざ谷ぴぞなぇ 多狸ぴぞどせ鱈孫淡ぴぞどそ贈
	var $m_recvMsg; 		// 村旦ぴぞどざ谷ぴぞなぇ多臓属ぴぞなく 端卒ぴぞなぞぴぞどぜぴぞなき 存ぴぞなぞ遜ぴぞどざぴぞどげ旦
	var $m_companyNumber; 		// 損巽他歎ぴぞなず 袖樽揃ぴぞなお孫淡ぴぞどそ贈(10ぴぞなず存速 村箪ぴぞなず)
	var $m_cardCode; 		// ぴぞどじ束袖奪損巽 ぴぞどじぴぞなず袖奪
	var $m_cardIssuerCode; 		// ぴぞどじ束袖奪 孫ぴぞにぁ賊ぴぞなぞ損巽(尊ぴぞどぜぴぞにあ) ぴぞどじぴぞなず袖奪
	var $m_payMethod; 		// ぴぞどげ旦尊ぴぞなき孫脱孫箪
	var $m_merchantReserved1; 	// 多孫尊単ぴぞどぜぴぞなあ袖奪 (ぴぞどげ旦尊ぴぞなき) 
	var $m_merchantReserved2; 	// 多孫尊単ぴぞどぜぴぞなあ袖奪 (ぴぞどげ旦尊ぴぞなき) 
	var $m_merchantReserved3; 	// 多孫尊単ぴぞどぜぴぞなあ袖奪 (ぴぞどげ旦尊ぴぞなき) 
	var $m_uip; 			// ぴぞどげ旦尊ぴぞなきぴぞなぇ PC IP Addr
	var $m_url; 			// ぴぞどげ旦尊ぴぞなき 損坦ぴぞどげ臓 URL
	var $m_billingPeriod; 		// Billing 賊但属贈 (2002/07 ぴぞどぜ旦巽 損巽多谷他ぴぞどそぴぞどぜぴぞなく)
	var $m_payOption; 		
	var $m_encrypted; 		// 他ぴぞなおぴぞどそ贈孫速 (卒谷ぴぞどじ捉ぴぞどず属揃ぴぞなぇ 他ぴぞなおぴぞどそ贈ぴぞどそ足袖ぴぞどそ PLAIN TEXT)
	var $m_sessionKey; 		// 他ぴぞなおぴぞどそ贈孫速 (属淡属続ぴぞどず属揃ぴぞなぇ 他ぴぞなおぴぞどそ贈ぴぞどそ足袖ぴぞどそ 卒谷ぴぞどじ捉ぴぞどず属)
	var $m_uid; 			// INIpay User ID (2002/07 ぴぞどぜ旦巽 損巽多谷他ぴぞどそぴぞどぜぴぞなく)
	var $m_quotaInterest; 		// 孫束ぴぞなぅぴぞなずぴぞどぜぴぞなき尊ぴぞなぇ FLAG
	var $m_cardNumber;  		// 遜ぴぞどず多谷ぴぞどじ束袖奪 孫淡ぴぞどそ贈
	var $m_price1; 			// OK Cashbag, Netimoney 多臓村足 損巽多谷ぴぞどぜぴぞなお卒ぴぞどご ぴぞどざぴぞにぁ属臓 賊ぴぞなそ他ぴぞなごぴぞどげ造尊存
	var $m_price2; 			// OK Cashbag, Netimoney 多臓村足 損巽多谷ぴぞどぜぴぞなお卒ぴぞどご ぴぞどざぴぞにぁ属臓 賊ぴぞなそ他ぴぞなごぴぞどげ造尊存
	var $m_cardQuota; 		// ぴぞどぜぴぞなき尊ぴぞなぇ賊但属贈
	var $m_bankCode; 		// 尊ぴぞどぜぴぞにあぴぞどじぴぞなず袖奪
	var $m_ocbNumber; 		// OK Cashbag ぴぞどじ束袖奪 孫淡ぴぞどそ贈
	var $m_ocbPasswd; 		// OK Cashbag ぴぞどじ束袖奪 尊単孫ぴぞなか孫淡ぴぞどそ贈
	var $m_authentification; 	// 尊損ぴぞなぇぴぞなぇぴぞどげ探 FLAG
	var $m_authField1; 		// 尊損ぴぞなぇぴぞなぇぴぞどげ探多臓 ぴぞどぜぴぞなあ多辰ぴぞどぜぴぞなが ぴぞどげぴぞなけ孫ぴぞなぇ孫淡ぴぞどそ贈 袖ぴぞなず 7ぴぞなず存速
	var $m_authField2; 		// 尊損ぴぞなぇぴぞなぇぴぞどげ探多臓 ぴぞどぜぴぞなあ多辰ぴぞどぜぴぞなが ぴぞどじ束袖奪 尊単孫ぴぞなか孫淡ぴぞどそ贈 他ぴぞなぐ 2ぴぞなず存速
	var $m_authField3; 		// 尊損ぴぞなぇぴぞなぇぴぞどげ探多臓 ぴぞどぜぴぞなあ多辰ぴぞどぜぴぞなが 多孫尊単ぴぞどぜぴぞなあ袖奪
	var $m_passwd; 			// (孫端多谷) 尊単孫ぴぞなか孫淡ぴぞどそ贈
	var $m_cardExpy; 		// 遜ぴぞどず多谷ぴぞどじ束袖奪 俗ぴぞどそ多賊但属贈-続但 (YY)
	var $m_cardExpm; 		// 遜ぴぞどず多谷ぴぞどじ束袖奪 俗ぴぞどそ多賊但属贈-多湛 (MM)
	var $m_cardExpire; 		// 遜ぴぞどず多谷ぴぞどじ束袖奪 俗ぴぞどそ多賊但属贈 (YYMM)
	var $m_ocbCardType; 		// OK Cashbag ぴぞどじ束袖奪 俗ぴぞどぜ端 (ぴぞなず損巽ぴぞどじ束袖奪...)
	var $m_merchantReserved; 	// 多孫尊単ぴぞどぜぴぞなあ袖奪 (尊単ぴぞどげ旦尊ぴぞなき)
	var $m_cancelMsg; 		// ぴぞどざ谷村ぴぞなき 損巽俗
	var $m_resultCode; 		// 属叩属炭 ぴぞどじぴぞなず袖奪 (2 digit)
	var $m_resultMsg; 		// 属叩属炭 続損多谷
	var $m_authCode; 		// 遜ぴぞどず多谷ぴぞどじ束袖奪 遜ぴぞどごぴぞなぇ孫淡ぴぞどそ贈
	var $m_ocbResultPoint; 		// OK Cashbag Point ぴぞどげ其ぴぞどそ存遜ぴぞどざ 属臓多谷ぴぞどせ歎ぴぞなぇぴぞどせ速
	var $m_authCertain; 		// PG多臓村足 尊損ぴぞなぇぴぞなぇぴぞどげ探損 村旦ぴぞどぜぴぞにあぴぞどぜぴぞなお多卒卒ぴぞどごぴぞどげ旦存側 続捉ぴぞどず存続損卒ぴぞどご FLAG
	var $m_ocbSaveAuthCode; 	// OK Cashbag 短存続 遜ぴぞどごぴぞなぇ孫淡ぴぞどそ贈
	var $m_ocbUseAuthCode; 		// OK Cashbag 損巽多谷 遜ぴぞどごぴぞなぇ孫淡ぴぞどそ贈
	var $m_ocbAuthDate; 		// OK Cashbag 遜ぴぞどごぴぞなぇ 続俗ぴぞどご促
	var $m_pgAuthDate; 		// PG 遜ぴぞどごぴぞなぇ 続俗ぴぞどご促
	var $m_pgAuthTime; 		// PG 遜ぴぞどごぴぞなぇ 遜ぴぞどざ属蔵
	var $m_pgCancelDate; 		// PG ぴぞどざ谷村ぴぞなき 続俗ぴぞどご促
	var $m_pgCancelTime; 		// PG ぴぞどざ谷村ぴぞなき 遜ぴぞどざ属蔵
	var $m_requestMsg; 		// 尊存続他 存ぴぞなぞ遜ぴぞどざぴぞどげ旦
	var $m_responseMsg; 		// 孫ぴぞなぞ尊 存ぴぞなぞ遜ぴぞどざぴぞどげ旦
	var $m_resulterrcode; 		// 属叩属炭存ぴぞなぞ村村ぴぞどげ旦 多臓揃俗ぴぞどじぴぞなず袖奪
	var $m_resultprice; 		// 属叩ぴぞどげ側 多ぴぞなお揃叩 賊ぴぞなそ他ぴぞなご

/* == ぴぞどせ他ぴぞどじ続遜ぴぞどざ ぴぞどざぴぞにぁ属臓 ぴぞどぜぴぞなあ袖奪 (2005.02.01 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) == */
	var $m_remain_price;		// ぴぞどせ他ぴぞどじ続遜ぴぞどざ ぴぞなぜ他ぴぞなご

/* == CMS属竪ぴぞどげぴぞどごぴぞなぅぴぞどざ村 ぴぞどぜぴぞなあ袖奪 ぴぞどざぴぞにぁ属臓 (2004. 11. 15 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) == */
	var $m_bankAccount; 		// 尊ぴぞどぜぴぞにあ 属竪ぴぞどげぴぞどご孫淡ぴぞどそ贈
	var $m_regNumber; 		// ぴぞどげぴぞなけ孫ぴぞなぇ袖樽揃ぴぞなお孫淡ぴぞどそ贈 (遜ぴぞどぜ遜ぴぞどざ属贈 尊担存袖多谷 ぴぞどげぴぞなけ孫ぴぞなぇ袖樽揃ぴぞなお 孫淡ぴぞどそ贈 13ぴぞなず存速)
	var $m_CMSBankCode;		// 属叩ぴぞどげ側多ぴぞなお揃叩ぴぞどそぴぞどじ 存速ぴぞどずぴぞなお 尊ぴぞどぜぴぞにあぴぞどじぴぞなず袖奪
	var $m_price_org;		// ぴぞどざ但賊ぴぞなそぴぞどざぴぞなが賊ぴぞなそ他ぴぞなご
	var $m_cmsday;			// ぴぞどざ但賊ぴぞなそ多孫ぴぞどげ造ぴぞなお
	var $m_cmsdatefrom;		// ぴぞどざ但賊ぴぞなそ遜ぴぞどざぴぞなせ多湛
	var $m_cmsdatero;		// ぴぞどざ但賊ぴぞなそぴぞどげ他揃叩多湛
	var $m_cmstype;			// 1-CMS ぴぞなず袖多(多孫他ぴぞにあ)ぴぞなぅぴぞどざ村, 2-CMS属竪ぴぞどげぴぞどご袖樽揃ぴぞなお

/* == 尊ぴぞなぇ尊ぴぞなかぴぞどざ谷村ぴぞなき(巽遜ぴぞどごぴぞなぇ) ぴぞどざぴぞにぁ属臓 ぴぞどぜぴぞなあ袖奪 (2004.11.05 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) == */
	var $m_tid_org;		// 多淡属ぴぞどず揃臓 TID
	var $m_remains = "";		// ぴぞどざぴぞなけぴぞどげ他属叩ぴぞどげ側 賊ぴぞなそ他ぴぞなご
	var $m_flg_partcancel = "";	// 尊ぴぞなぇ尊ぴぞなかぴぞどざ谷村ぴぞなき, 巽遜ぴぞどごぴぞなぇ 賊存尊ぴぞなか属捉
	var $m_cnt_partcancel = ""; 	// 尊ぴぞなぇ尊ぴぞなかぴぞどざ谷村ぴぞなき(巽遜ぴぞどごぴぞなぇ) 多辰ぴぞどざ損ぴぞどそ遜村旦	
	
/* == ぴぞどぜぴぞなあ袖奪ぴぞどざぴぞにぁ属臓 (2004.06.23 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) == */
	var $m_moid; 		// 損坦ぴぞどぜ属ぴぞどげぴぞなけ孫速孫淡ぴぞどそ贈
	var $m_codegw; 		// 端ぴぞどそ足属叩ぴぞどげ側 損巽他歎ぴぞなず ぴぞどじぴぞなず袖奪
	var $m_ParentEmail; 	// 尊存ぴぞどそ贈ぴぞなず ぴぞなぅ存ぴぞなぞぴぞなお ぴぞどげぴぞなけ村ぴぞなき
	var $m_ocbcardnumber; 	// OK CASH BAG 属叩ぴぞどげ側 , 短存続ぴぞなぇ 属脱多狸 OK CASH BAG ぴぞどじ束袖奪 孫淡ぴぞどそ贈
	var $m_cultureid;	// ぴぞどじぴぞどざぴぞどざぴぞどじ 揃贈袖奪 ID
	var $m_directbankacc;	// 尊ぴぞどぜぴぞにあ 属竪ぴぞどげぴぞどごぴぞなぅぴぞどざ村 属叩ぴぞどげ側ぴぞなぇ 属脱多狸 尊ぴぞどぜぴぞにあ 属竪ぴぞどげぴぞどご 孫淡ぴぞどそ贈
	var $m_directbankcode;	// 尊ぴぞどぜぴぞにあ 属竪ぴぞどげぴぞどごぴぞなぅぴぞどざ村 属叩ぴぞどげ側ぴぞなぇ 属脱多狸 尊ぴぞどぜぴぞにあ ぴぞどじぴぞなず袖奪 孫淡ぴぞどそ贈
	var $m_billKey;		// 遜ぴぞどぜ遜ぴぞどざ属贈 尊担存袖 尊担ぴぞどず属
	var $m_cardPass;	// 遜ぴぞどぜ遜ぴぞどざ属贈 尊担存袖多谷 遜ぴぞどず多谷ぴぞどじ束袖奪 尊単孫ぴぞなか孫淡ぴぞどそ贈 他ぴぞなぐ 2ぴぞなず存速
	var $m_billtype;	// 尊担存袖ぴぞどず存ぴぞなく (遜ぴぞどず多谷ぴぞどじ束袖奪 - card, ぴぞどそぴぞなぞ卒谷ぴぞどせ湛 - hpp)
	
	
/* ==  属臓損坦属竪ぴぞどげぴぞどご存側 則ぴぞどぜぴぞなざ ぴぞどざぴぞにぁ属臓 (2003.07.07 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお)  == */
	var $m_perno; 		// 属臓損坦属竪ぴぞどげぴぞどご ぴぞどげ旦尊ぴぞなき 多孫他ぴぞにあぴぞなず ぴぞどげぴぞなけ孫ぴぞなぇ孫淡ぴぞどそ贈
	var $m_oid; 		// ぴぞどげぴぞなけ孫速孫淡ぴぞどそ贈(損坦ぴぞどげ臓多臓村足 端卒ぴぞなぞ袖ぴぞどぜ卒ぴぞどご 属捉)
	var $m_vacct; 		// 属臓損坦属竪ぴぞどげぴぞどご 孫淡ぴぞどそ贈
	var $m_vcdbank; 	// ぴぞどざ造孫淡多臓 損巽多谷袖ぴぞどそ 尊ぴぞどぜぴぞにあぴぞどじぴぞなず袖奪
	var $m_dtinput; 	// ぴぞなく賊ぴぞなそ 多孫ぴぞどげ造ぴぞなお
	var $m_nminput; 	// 村ぴぞなせ賊ぴぞなそぴぞなず 存鱈
	var $m_nmvacct; 	// 多孫賊ぴぞなそぴぞどげぴぞなけ 存鱈
	var $m_rvacct;		// ぴぞどそ俗尊ぴぞなき属竪ぴぞどげぴぞどご 孫淡ぴぞどそ贈
	var $m_rvcdbank;	// ぴぞどそ俗尊ぴぞなき属竪ぴぞどげぴぞどご 尊ぴぞどぜぴぞにあぴぞどじぴぞなず袖奪
	var $m_rnminput;	// ぴぞどそ俗尊ぴぞなき属竪ぴぞどげぴぞどご 多孫賊ぴぞなそぴぞどげぴぞなけ存鱈

/* == ぴぞどぜ旦賊ぴぞなそ 多袖村旦ぴぞどげ探 孫ぴぞにぁぴぞどぜぴぞにあ ぴぞどぜぴぞなあ袖奪 ぴぞどざぴぞにぁ属臓 (2003.12.08 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) == */
	var $m_cr_price;	// ぴぞどざぴぞなが ぴぞどぜ旦賊ぴぞなそ属叩ぴぞどげ側 賊ぴぞなそ他ぴぞなご
	var $m_sup_price;	// 属淡賊ぴぞなぞ属臓
	var $m_tax;		// 尊ぴぞなぇ属臓村村
	var $m_srvc_price;	// 尊損巽揃叩
	var $m_usepot;		// 多袖村旦ぴぞどげ探 損巽多谷多谷袖袖
	var $m_ocbprice;	// OCB 短存続多辰ぴぞどざ損賊ぴぞなそ他ぴぞなご

/* ==  属臓損坦属竪ぴぞどげぴぞどご存側 則ぴぞどぜぴぞなざ ぴぞどざぴぞにぁ属臓 (2006.10.18 賊竪多谷多樽)  == */
	var $m_tminput; 	// ぴぞなく賊ぴぞなそ 多孫ぴぞどげ造 遜ぴぞどざ属贈

/* ==  促ぴぞどせ辰ぴぞなぅぴぞどげ旦 則尊俗ぴぞどげ其 孫脱ぴぞどげ旦 (2006.12.27 ぴぞなぅ遜ぴぞどご賊孫)  == */
	var $m_enc_arr = array();
	var $m_enctype;
	var $m_checkopt;
	var $m_rn;
	var $m_ini_rn;
	var $m_ini_encfield;
	var $m_ini_certid;
    
/* ==  属叩ぴぞどげ側多辰ぴぞどざ損ぴぞどせ辰ぴぞなぅぴぞどげ旦 袖促ぴぞなぅぴぞどず存 他ぴぞなおぴぞどそ贈ぴぞどそ足(2007.01.10 ぴぞなぅ遜ぴぞどご賊孫)  == */
	var $m_enc_src;
    	
/* ==  ぴぞどず谷孫脱ぴぞどせぴぞどぜ KVPぴぞどぜぴぞどざ揃俗賊ぴぞなごぴぞなぇ ぴぞどざ続存速(2007.01.25 ぴぞなぅ遜ぴぞどご賊孫) == */
	var $m_kvp_card_prefix;
	var $m_kvp_noint;
	var $m_kvp_quota;

	var $m_pgn;
/* ==  多ぴぞどぜぴぞどご存其ぴぞどじぴぞなお ぴぞどぜ旦賊ぴぞなそ多袖村旦ぴぞどげ探(2007.06.28 ぴぞなぅ遜ぴぞどご賊孫) == */
	var $m_OMFlag;
	var $m_SubCrCnt;
	var $m_om = array();

/* ==  属ぴぞなくぴぞなぎ孫速ぴぞどそ足損坦ぴぞどぜ属賊ぴぞどぜ(2009.04.17 ぴぞなぅ遜ぴぞどご賊孫) == */
  	var $m_dgcl_cardcount;
  	var $m_dgcl_cardnum = array();
  	var $m_dgcl_remain_price = array();
  	var $m_dgcl_errmsg = array();

/* ==  ぴぞどそぴぞなぞ卒谷ぴぞどせ湛 ぴぞどせ短ぴぞどせ辰ぴぞなぅ 尊単ぴぞなぇぴぞどげ探(2010.11.03 ぴぞどげ造賊脱ぴぞどそぴぞどせ) == */
    var $m_hpptype;
    var $m_hppnumber;
    var $m_hppregnumber;
    var $m_hppauthnumber;
    var $m_hppcotype;
    var $m_hppcorp;
    var $m_hppauthserial;
    var $m_hppoid;
    var $m_hppsid;

/* ==  尊担存袖 尊ぴぞなぇ尊ぴぞなかぴぞどざ谷村ぴぞなき 属臓卒ぴぞどぞ多息尊ぴぞなぇ(2012.07.11 賊竪村賊賊孫) == */
	var $m_prtcCode;
	
	function startAction()
	{
		switch( $this->m_type)
		{
			case("securepay") :
				$this->m_requestMsg = 
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"rn=" . $this->m_rn . "\x0B" .
					"encfield=" . $this->m_ini_encfield . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
	        "oid=" . $this->m_oid . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"uid=" . $this->m_uid . "\x0B" .
					"url=" . $this->m_url . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"paymethod=" . $this->m_payMethod . "\x0B" .
					"goodname=" . $this->m_goodName . "\x0B" .
					"currency=" . $this->m_currency . "\x0B" .
					"price=" . $this->m_price . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"buyertel=" . $this->m_buyerTel . "\x0B" .
					"buyeremail=" . $this->m_buyerEmail . "\x0B" .
					"parentemail=" . $this->m_ParentEmail . "\x0B" .
					"recvname=" . $this->m_recvName . "\x0B" .
					"recvtel=" . $this->m_recvTel . "\x0B" .
					"recvaddr=" . $this->m_recvAddr . "\x0B" .
					"recvpostnum=" . $this->m_recvPostNum . "\x0B" .
					"recvmsg=" . $this->m_recvMsg . "\x0B" .
					"sessionkey=" . $this->m_sessionKey . "\x0B" .
					"encrypted=" . $this->m_encrypted . "\x0B" .
					"pgn=" . $this->m_pgn . "\x0B" .
					"enctype=" . $this->m_enctype . "\x0B" .
					"merchantreserved1=" . $this->m_merchantReserved1 . "\x0B" .
					"merchantreserved2=" . $this->m_merchantReserved2 . "\x0B" .
					"merchantreserved3=" . $this->m_merchantReserved3;
				$exec_str = $this->m_inipayHome . "/phpexec/INIsecurepay.phpexec \"" . $this->m_requestMsg . "\"";
				$this->m_responseMsg = exec($exec_str);
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIsecurepay.phpexec";
				break;
		
			case("cancel") :
				$this->m_requestMsg = 
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"tid=" . $this->m_tid . "\x0B" .
					"msg=" . $this->m_cancelMsg . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"merchantreserved=" . $this->m_merchantReserved;
				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIcancel.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIcancel.phpexec";
				break;

			case("confirm") :
				$this->m_requestMsg = 
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"tid=" . $this->m_tid . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"merchantreserved=" . $this->m_merchantReserved;
				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIconfirm.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIconfirm.phpexec";
				break;
		
			case("capture") :
				$this->m_requestMsg = 
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"tid=" . $this->m_tid . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"merchantreserved=" . $this->m_merchantReserved;
				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIcapture.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIcapture.phpexec";
				break;
		
			case("formpay") :
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"uid=" . $this->m_uid . "\x0B" .
					"url=" . $this->m_url . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"paymethod=" . $this->m_payMethod . "\x0B" .
					"goodname=" . $this->m_goodName . "\x0B" .
					"currency=" . $this->m_currency . "\x0B" .
					"price=" . $this->m_price . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"buyertel=" . $this->m_buyerTel . "\x0B" .
					"buyeremail=" . $this->m_buyerEmail . "\x0B" .
					"recvname=" . $this->m_recvName . "\x0B" .
					"recvtel=" . $this->m_recvTel . "\x0B" .
					"recvaddr=" . $this->m_recvAddr . "\x0B" .
					"recvpostnum=" . $this->m_recvPostNum . "\x0B" .
					"recvmsg=" . $this->m_recvMsg . "\x0B" .
					"cardnumber=" . $this->m_cardNumber . "\x0B" .
					"cardquota=" . $this->m_cardQuota . "\x0B" .
					"cardexpy=" . $this->m_cardExpy . "\x0B" .
					"cardexpm=" . $this->m_cardExpm . "\x0B" .
					"quotainterest=" . $this->m_quotaInterest . "\x0B" .
					"authentification=" . $this->m_authentification . "\x0B" .
					"authfield1=" . $this->m_authfield1 . "\x0B" .
					"authfield2=" . $this->m_authfield2 . "\x0B" .
					"price1=" . $this->m_price1 . "\x0B" .
					"price2=" . $this->m_price2 . "\x0B" .
					"bankcode=" . $this->m_bankCode . "\x0B" .
					"bankaccount=" . $this->m_bankAccount . "\x0B" .
					"regnumber=" . $this->m_regNumber . "\x0B" .
					"price_org=" . $this->m_price_org . "\x0B" .
					"cmsday=" . $this->m_cmsday .  "\x0B" .
					"cmsdatefrom=" . $this->m_cmsdatefrom . "\x0B" .
					"cmsdateto=" . $this->m_cmsdateto . "\x0B" .
					"cmstype=" . $this->m_cmstype . "\x0B" .
					"ocbnumber=" . $this->m_ocbNumber . "\x0B" .
					"ocbpasswd=" . $this->m_ocbPasswd . "\x0B" .
                   	"hpptype=" . $this->m_hpptype . "\x0B" .
                    "hppnumber=" . $this->m_hppnumber . "\x0B" .
                    "hppregnumber=" . $this->m_hppregnumber . "\x0B" .
                    "hppauthnumber=" . $this->m_hppauthnumber . "\x0B" .
                    "hppcotype=" . $this->m_hppcotype . "\x0B" .
                    "hppcorp=" . $this->m_hppcorp . "\x0B" .
                    "hppauthserial=" . $this->m_hppauthserial . "\x0B" .
                    "hppoid=" . $this->m_hppoid . "\x0B" .
                    "hppsid=" . $this->m_hppsid . "\x0B" .
					"passwd=" . $this->m_passwd . "\x0B" .
					"perno=" . $this->m_perno . "\x0B" .
	                "oid=" . $this->m_oid . "\x0B" .
	                "vacct=" . $this->m_vacct . "\x0B" .
	                "vcdbank=" . $this->m_vcdbank . "\x0B" .
	                "dtinput=" . $this->m_dtinput . "\x0B" .
	                "nminput=" . $this->m_nminput . "\x0B" .
					"companynumber=" . $this->m_companyNumber . "\x0B" .
					"merchantreserved1=" . $this->m_merchantReserved1 . "\x0B" .
					"merchantreserved2=" . $this->m_merchantReserved2 . "\x0B" .
					"merchantreserved3=" . $this->m_merchantReserved3;
																			
				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIformpay.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIformpay.phpexec";
				
				
				break;
		
			case("repay") :
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"oldtid=" . $this->m_oldTid . "\x0B" .
					"url=" . $this->m_url . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"goodname=" . $this->m_goodName . "\x0B" .
					"currency=" . $this->m_currency . "\x0B" .
					"price=" . $this->m_price . "\x0B" .
					"confirm_price=" . $this->m_confirm_price . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"buyertel=" . $this->m_buyerTel . "\x0B" .
					"buyeremail=" . $this->m_buyerEmail . "\x0B" .
					"cardquota=" . $this->m_cardQuota . "\x0B" .
					"quotainterest=" . $this->m_quotaInterest . "\x0B" .
					"merchantreserved1=" . $this->m_merchantReserved1 . "\x0B" .
					"merchantreserved2=" . $this->m_merchantReserved2 . "\x0B" .
					"merchantreserved3=" . $this->m_merchantReserved3;
				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIrepay.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIrepay.phpexec";
				break;

			case("ocbquery") :
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"ocbnumber=" . $this->m_ocbNumber;
				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIocbquery.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIocbquery.phpexec";
				break;
				
			case("auth_bill") :
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"paymethod=" . $this->m_payMethod . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"billtype=" . $this->m_billtype . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"goodname=" . $this->m_goodName . "\x0B" .
					"uid=" . $this->m_uid . "\x0B" .
					"url=" . $this->m_url . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"encrypted=" . $this->m_encrypted . "\x0B" .
					"sessionkey=" . $this->m_sessionKey . "\x0B" .
					"merchantReserved3=" . $this->m_merchantReserved3;

				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIauth_bill.phpexec \"" . $this->m_requestMsg . "\"", $output);
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIauth_bill.phpexec";
				
				break;
				
			case("auth") :
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"paymethod=" . $this->m_payMethod . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"billtype=" . $this->m_billtype . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"uid=" . $this->m_uid . "\x0B" .
					"url=" . $this->m_url . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"encrypted=" . $this->m_encrypted . "\x0B" .
					"sessionkey=" . $this->m_sessionKey . "\x0B" .
					"merchantReserved3=" . $this->m_merchantReserved3;

				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIauth.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIauth.phpexec";
				
				break;

			case("formauth") :
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"paymethod=" . $this->m_payMethod . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"billtype=" . $this->m_billtype . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"cardnumber=" . $this->m_cardNumber . "\x0B" .
					"cardexpy=" . $this->m_cardExpy . "\x0B" .
					"cardexpm=" . $this->m_cardExpm . "\x0B" .					
					"authfield1=" . $this->m_authfield1 . "\x0B" .
					"authfield2=" . $this->m_authfield2 . "\x0B" .
					"goodname=" . $this->m_goodName . "\x0B" .
					"uid=" . $this->m_uid . "\x0B" .
					"url=" . $this->m_url . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"merchantReserved3=" . $this->m_merchantReserved3;

				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIformauth.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIformauth.phpexec";
				
				break;
				
			case("reqrealbill") :
				$this->m_requestMsg = 
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"oid=" . $this->m_oid . "\x0B" .
					"paymethod=" . $this->m_payMethod . "\x0B" .
					"url=" . $this->m_url . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"goodname=" . $this->m_goodName . "\x0B" .
					"currency=" . $this->m_currency . "\x0B" .
					"price=" . $this->m_price . "\x0B" .
					"billkey=" . $this->m_billKey . "\x0B" .
					"billtype=" . $this->m_billtype . "\x0B" .
					"cardpass=" . $this->m_cardPass . "\x0B" .
					"regnumber=" . $this->m_regNumber . "\x0B" .
					"cardquota=" . $this->m_cardQuota . "\x0B" .
					"authentification=" . $this->m_authentification . "\x0B" .
					"quotainterest=" . $this->m_quotaInterest . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"buyertel=" . $this->m_buyerTel . "\x0B" .
					"buyeremail=" . $this->m_buyerEmail . "\x0B" .
					"merchantreserved1=" . $this->m_merchantReserved1 . "\x0B" .
					"merchantreserved3=" . $this->m_merchantReserved3;

				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIreqrealbill.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIreqrealbill.phpexec";
				
				break;
			
			case("receipt") :
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"paymethod=" . $this->m_payMethod . "\x0B" .
					"goodname=" . $this->m_goodName . "\x0B" .
					"currency=" . $this->m_currency . "\x0B" .
					"cr_price=" . $this->m_cr_price . "\x0B" .
					"sup_price=" . $this->m_sup_price . "\x0B" .
					"tax=" . $this->m_tax . "\x0B" .
					"srvc_price=" . $this->m_srvc_price . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"buyertel=" . $this->m_buyerTel . "\x0B" .
					"buyeremail=" . $this->m_buyerEmail . "\x0B" .
					"ocbnumber=" . $this->m_ocbnumber . "\x0B" .
					"ocbprice=" . $this->m_ocbprice . "\x0B" .
					"reg_num=" . $this->m_reg_num . "\x0B" .
					"useopt=" . $this->m_useopt . "\x0B" .
					"companynumber=" . $this->m_companyNumber. "\x0B";
				//多ぴぞどぜぴぞどご存其ぴぞどじぴぞなお ぴぞどぜ旦賊ぴぞなそ多袖村旦ぴぞどげ探
				if( $this->m_OMFlag == "2" && $this->m_SubCrCnt > 0 )
				{
					$this->m_requestMsg .= "OMFlag=".$this->m_OMFlag."\x0B";
					$this->m_requestMsg .= "SubCrCnt=".$this->m_SubCrCnt."\x0B";
					for( $i=1; $i <= $this->m_SubCrCnt ; $i++ )
					{
						$arr["SubNmComp$i"] .= $this->m_om["Submall_NmComp$i"]	. "\x0C";
						$arr["SubNmComp$i"] .= $this->m_om["Submall_NoComp$i"]	. "\x0C";
						$arr["SubNmComp$i"] .= $this->m_om["Submall_NoCEO$i"]		. "\x0C";
						$arr["SubNmComp$i"] .= $this->m_om["Submall_ID$i"]			. "\x0C";
						$arr["SubNmComp$i"] .= $this->m_om["Submall_price$i"]		. "\x0C";
						$arr["SubNmComp$i"] .= $this->m_om["Submall_srvprice$i"]; 
						$this->m_requestMsg .= "SubNmComp$i=".$arr["SubNmComp$i"]."\x0B";
					}
				}
				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIreceipt.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIreceipt.phpexec";
				break;
				
			case("chkfake") :
				//孫竪多足ぴぞどざ村ぴぞどず息
				if( !is_array( $this->m_enc_arr ) )	
				{
					echo "ぴぞどざぴぞなけ村ぴぞなき 4属続ぴぞどぜ ぴぞどぜぴぞなご存単多臓 卒谷ぴぞどぜぴぞなざ村賊 他ぴぞなおぴぞどそ贈ぴぞどそ足ぴぞどぜぴぞなお村ぴぞどず他ぴぞにぁ ぴぞどぜぴぞなぐ卒ぴぞなお卒ぴぞなじ.";
					return;
				} 
				//set parameter
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"debug=" . $this->m_debug. "\x0B".
					"enctype=" . $this->m_enctype. "\x0B".
					"admin=" . $this->m_keyPw . "\x0B" .
					"checkopt=" . $this->m_checkopt . "\x0B";

				foreach ($this->m_enc_arr as $key => $val)
				{
					$this->m_requestMsg = $this->m_requestMsg . $key . "=" . $val . "\x0B";	
				}
				$this->m_requestMsg = substr( $this->m_requestMsg, 0, -1 ); //trim end \x0B

				$exec_str = $this->m_inipayHome . "/phpexec/INIchkfake.phpexec \"" . $this->m_requestMsg . "\"";
        exec( $exec_str, $output );
        if( is_array( $output ) )
        {
            foreach( $output as $out_str )
            {
                $resData.= $out_str."\n";
            }
        		$resData = substr($resData, 0, -1); // Eliminate unnecessary \n
        }
        else
        {
            $resData .= $out_str;
        }
				$this->m_responseMsg = $resData;
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIchkfake.phpexec";
				break;
				
			case("makeenc") :
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"encsrc=" . $this->m_enc_src;
				$exec_str = $this->m_inipayHome . "/phpexec/INImakeenc.phpexec \"" . $this->m_requestMsg . "\"";
        exec( $exec_str, $output );
        if( is_array( $output ) )
        {
            foreach( $output as $out_str )
            {
                $resData.= $out_str."\n";
            }
        	$resData = substr($resData, 0, -1); // Eliminate unnecessary \n
        } 
        else
        {
          $resData .= $out_str;
        }
				$this->m_responseMsg = $resData;
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INImakeenc.phpexec";
				break;

			case("KVPSafeKeyIN") :
				$this->m_requestMsg = 
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"uid=" . $this->m_uid . "\x0B" .
					"url=" . $this->m_url . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"paymethod=" . $this->m_payMethod . "\x0B" .
					"goodname=" . $this->m_goodName . "\x0B" .
					"currency=" . $this->m_currency . "\x0B" .
					"cardcode=" . $this->m_cardCode . "\x0B" .
					"price=" . $this->m_price . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"buyertel=" . $this->m_buyerTel . "\x0B" .
					"buyeremail=" . $this->m_buyerEmail . "\x0B" .
					"sessionkey=" . $this->m_sessionKey . "\x0B" .
					"encrypted=" . $this->m_encrypted . "\x0B" .
					"kvp_card_prefix=" . $this->m_kvp_card_prefix . "\x0B" .
					"kvp_noint=" . $this->m_kvp_noint . "\x0B" .
					"kvp_quota=" . $this->m_kvp_quota;
				$exec_str = $this->m_inipayHome . "/phpexec/INIKVPSafeKeyIN.phpexec \"" . $this->m_requestMsg . "\"";
				$this->m_responseMsg = exec($exec_str);
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIKVPSafeKeyIN.phpexec";
				break;

			case("formauth_bill") :
				$this->m_requestMsg =
					"inipayhome=" . $this->m_inipayHome . "\x0B" .
					"paymethod=" . $this->m_payMethod . "\x0B" .
					"pgid=" . $this->m_pgId . "\x0B" .
					"spgip=" . $this->m_subPgIp . "\x0B" .
					"admin=" . $this->m_keyPw . "\x0B" .
					"debug=" . $this->m_debug . "\x0B" .
					"billtype=" . $this->m_billtype . "\x0B" .
					"mid=" . $this->m_mid . "\x0B" .
					"test=" . $this->m_test . "\x0B" .
					"uip=" . $this->m_uip . "\x0B" .
					"cardnumber=" . $this->m_cardNumber . "\x0B" .
					"cardexpy=" . $this->m_cardExpy . "\x0B" .
					"cardexpm=" . $this->m_cardExpm . "\x0B" .					
					"authfield1=" . $this->m_authfield1 . "\x0B" .
					"authfield2=" . $this->m_authfield2 . "\x0B" .
					"authentification=" . $this->m_authentification . "\x0B" .
					"price=" . $this->m_price . "\x0B" .
					"currency=" . $this->m_currency . "\x0B" .
					"uid=" . $this->m_uid . "\x0B" .
					"url=" . $this->m_url . "\x0B" .
					"buyername=" . $this->m_buyerName . "\x0B" .
					"merchantReserved3=" . $this->m_merchantReserved3;

				$this->m_responseMsg = exec($this->m_inipayHome . "/phpexec/INIformauth_bill.phpexec \"" . $this->m_requestMsg . "\"");
				if(strlen($this->m_responseMsg) <= 1)
					$this->m_responseMsg = "ResultCode=01&ResultMsg=[9199]INVOKE ERR : " . $this->m_inipayHome . "/phpexec/INIformauth_bill.phpexec";
				break;
				
			default :
				$this->m_responseMsg = "ResultCode=01&ResultMsg=ぴぞどざ続存速ぴぞどぜぴぞなき 村旦 他淡卒ぴぞどご 属ぴぞどず揃臓俗ぴぞどぜ端ぴぞなく卒ぴぞなお卒ぴぞなじ : " . $this->m_type;
		}
		
		parse_str($this->m_responseMsg);
		$this->m_resultCode = $ResultCode;
		$this->m_resultMsg = $ResultMsg;

		if( $ResultCode !== '00')
			return false;

		$this->m_payMethod = $PayMethod;

		switch( $PayMethod){
			case "Card":
				$this->m_authCode = $CardAuthCode;
				$this->m_cardCode = $CardResultCode;

				$this->m_cardNumber = $CardResultNumber;
				$this->m_cardExpire = $CardResultExpire;
				$this->m_cardQuota = $CardResultQuota;

				break;
			case "Auth":
				/* == 遜ぴぞどぜ遜ぴぞどざ属贈 尊担存袖 ぴぞどぜぴぞなあ袖奪 == */
				$this->m_billKey = $BillKey;
			    $this->m_cardPass = $CardPass;
			    $this->m_cardKind = $CardKind;
				$this->m_cardCode = $CardResultCode;

			    break;
			case "reqrealbill":
				$this->m_quotaInterest = $QuotaInterest;

				break;
			default:
				$this->m_authCertain = $AuthCertain;

				$this->m_ocbSaveAuthCode = $OCBauthcode1;
				$this->m_ocbUseAuthCode = $OCBauthcode2;
				$this->m_ocbAuthDate = $OCBauthdate;
				$this->m_ocbResultPoint = $ResultPoint;
				
				$this->m_perno = $perno;
		}
		$this->m_resultCode = $ResultCode;
		$this->m_resultMsg = $ResultMsg;
		$this->m_payMethod = $PayMethod;

		$this->m_cardIssuerCode = $Detailcode;
		$this->m_tid = $Tid;
		$this->m_price1 = $Price1;
		$this->m_price2 = $Price2;
		$this->m_pgAuthDate = $PGauthdate;
		$this->m_pgAuthTime = $PGauthtime;

		// $this->m_void = $void;
		// $this->m_vacct = $vacct;
		// $this->m_vcdbank = $vcdbank;
		// $this->m_dtinput = $dtinput;

		
/* == ぴぞどせ他ぴぞどじ続遜ぴぞどざ ぴぞどざぴぞにぁ属臓 ぴぞどぜぴぞなあ袖奪(2005.02.01 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) == */
		// $this->m_remain_price = $remain_price;		// ぴぞどせ他ぴぞどじ続遜ぴぞどざ ぴぞなぜ他ぴぞなご

/* == ぴぞどぜ旦賊ぴぞなそ多袖村旦ぴぞどげ探 孫ぴぞにぁぴぞどぜぴぞにあ 存速ぴぞどずぴぞなお ぴぞどぜぴぞなあ袖奪 == */
		// $this->m_rcr_price = $RCR_Price;		// ぴぞどざぴぞながぴぞどぜ旦賊ぴぞなそ属叩ぴぞどげ側 賊ぴぞなそ他ぴぞなご
		// $this->m_rsup_price = $RSup_Price;		// 属淡賊ぴぞなぞ属臓
		// $this->m_rtax = $RTax;				// 尊ぴぞなぇ属臓村村
		// $this->m_rsrvc_price = $RSrvc_Price;		// 尊損巽揃叩
		// $this->m_ruseopt = $RUseOpt;			// ぴぞどぜ旦賊ぴぞなそ多袖村旦ぴぞどげ探 多谷袖袖 賊存尊ぴぞなか
		// $this->m_rcash_noappl = $Rcash_noappl;		// ぴぞどぜ旦賊ぴぞなそ多袖村旦ぴぞどげ探 孫ぴぞにぁぴぞどぜぴぞにあ 遜ぴぞどごぴぞなぇ孫淡ぴぞどそ贈
		// $this->m_rcash_rslt = $Rcash_rslt;		// ぴぞどぜ旦賊ぴぞなそ多袖村旦ぴぞどげ探 孫ぴぞにぁ賊ぴぞなぞぴぞどじぴぞなず袖奪 (4ぴぞなず存速)
		
/* == ぴぞどぜ旦賊ぴぞなそ多袖村旦ぴぞどげ探 ぴぞどざ谷村ぴぞなき 遜ぴぞどごぴぞなぇ 孫淡ぴぞどそ贈 存速ぴぞどずぴぞなお == */		
		// $this->m_rcash_cancel_noappl = $Rcash_cancel_noappl;
	
		
/* == CMS 属竪ぴぞどげぴぞどごぴぞなぅぴぞどざ村 存速ぴぞどずぴぞなお ぴぞどぜぴぞなあ袖奪 (2004. 11. 15 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) == */
		// $this->m_cmsbankcode = $CMSBankCode;		// 尊ぴぞどぜぴぞにあぴぞどじぴぞなず袖奪
 		

// /* == 尊ぴぞなぇ尊ぴぞなかぴぞどざ谷村ぴぞなき(巽遜ぴぞどごぴぞなぇ) ぴぞどざぴぞにぁ属臓 ぴぞどぜぴぞなあ袖奪 (2004.11.05 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) == */
// 		$this->m_tid_org = $TID_org;			// 多淡属ぴぞどず揃臓 TID
// 		$this->m_remains = $PR_remains;			// ぴぞどざぴぞなけぴぞどげ他属叩ぴぞどげ側 賊ぴぞなそ他ぴぞなご
// 		$this->m_flg_partcancel = $flg_partcancel;	// 尊ぴぞなぇ尊ぴぞなかぴぞどざ谷村ぴぞなき, 巽遜ぴぞどごぴぞなぇ 賊存尊ぴぞなか属捉
// 		$this->m_cnt_partcancel = $cnt_partcancel; 	// 尊ぴぞなぇ尊ぴぞなかぴぞどざ谷村ぴぞなき(巽遜ぴぞどごぴぞなぇ) 多辰ぴぞどざ損ぴぞどそ遜村旦		
		
/* == ぴぞどざぴぞにぁ属臓 ぴぞどぜぴぞなあ袖奪 (2004.6.23 卒谷存速 ぴぞなぅぴぞどげ他多ぴぞなお) == */
		$this->m_moid = $MOID;				// 損坦ぴぞどげ臓ぴぞどげぴぞなけ孫速孫淡ぴぞどそ贈
		$this->m_codegw = $CodeGW;			// 端ぴぞどそ足属叩ぴぞどげ側 損巽他歎ぴぞなず ぴぞどじぴぞなず袖奪
		// $this->m_ocbcardnumber = $OCBcardnumber; 	// OCB ぴぞどじ束袖奪孫淡ぴぞどそ贈	
		// $this->m_cultureid = $CultureID;		// ぴぞどじぴぞどざぴぞどざ続揃贈袖奪 ID, ぴぞどせ他ぴぞどじ続遜ぴぞどざ ID
		// $this->m_directbankcode = $DirectBankCode;	// 遜ぴぞどぜ遜ぴぞどざ属贈 尊ぴぞどぜぴぞにあ属竪ぴぞどげぴぞどごぴぞなぅぴぞどざ村 尊ぴぞどぜぴぞにあぴぞどじぴぞなず袖奪
		
/* ==  尊担存袖 尊ぴぞなぇ尊ぴぞなかぴぞどざ谷村ぴぞなき 属臓卒ぴぞどぞ多息尊ぴぞなぇ(2012.07.11 賊竪村賊賊孫) == */
		// $this->m_prtcCode = $PrtcCode;

		
/* == 属叩属炭存ぴぞなぞ村村ぴぞどげ旦 ($m_resultMsg)多臓村足 多臓揃俗ぴぞどじぴぞなず袖奪 ぴぞどざぴぞにぁぴぞどざ但 == */
		$str = $ResultMsg ;
		//$arr = split("\]+", $str);
		$arr = preg_split("/\]+/", $str);
		$this->m_resulterrcode = substr($arr[0],1);	// []他ぴぞどそぴぞどぜ ぴぞどじぴぞなず袖奪存存 ぴぞどぜ促遜ぴぞどざ


/* == 袖丹ぴぞどげ旦ぴぞどずぴぞなか 孫速ぴぞどそ足 損坦ぴぞどぜ属賊ぴぞどぜ ぴぞどじ束袖奪 村旦 (SKT 損坦ぴぞどぜ属賊ぴぞどぜ 属淡ぴぞどず谷存揃ぴぞなぇ 損巽多谷)== */		
		// $this->m_dgcl_cardcount = $dgcl_cardcount;
  //   for($i=1 ; $i < $this->m_dgcl_cardcount+1 ; $i++)
  //   {
  //     $this->m_dgcl_cardnum[$i-1] = ${"dgcl_cardnum".$i};
  //     $this->m_dgcl_remain_price[$i-1] = ${"dgcl_remain_price".$i};
  //     $this->m_dgcl_errmsg[$i-1] =  ${"dgcl_errmsg".$i};
  //   }


/* == SKT 損坦ぴぞどぜ属賊ぴぞどぜ ぴぞどぜぴぞなあ袖奪 (属叩ぴぞどげ側 孫脱孫箪 賊存尊ぴぞなか) == */
		// $this->m_sktg_method = $sktg_method;
		
/* ==  促ぴぞどせ辰ぴぞなぅぴぞどげ旦 則尊俗ぴぞどげ其 孫脱ぴぞどげ旦 (2006.12.27 ぴぞなぅ遜ぴぞどご賊孫)  == */
		// $this->m_ini_rn = $rn;
		// if($this->m_enctype == "asym")
		// {
		// 	$this->m_ini_encfield = str_replace(" ", "+", $encfield); 
		// 	$this->m_ini_encfield .= "&src=";
		// 	$this->m_ini_encfield .= str_replace(" ", "+", $src); 
		// }
		// else
		// {
		// 	$this->m_ini_encfield = str_replace(" ", "+", $encfield); //多淡損坦ぴぞどそ存尊孫 because parse_str属臓 "+"->" "
		// }
		// $this->m_ini_certid = str_replace(" ", "+", $certid);
	}
}

?>
